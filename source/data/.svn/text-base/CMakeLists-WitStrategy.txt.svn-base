
######################################################
#   - Modified by Paul in July, 2013                 #
#   - Demo about Darwin Robot                        #
######################################################

CMAKE_MINIMUM_REQUIRED(VERSION 2.6.4 FATAL_ERROR)

#########################################################
#   - All variables which are used to name all direct-  #
#   - ories will be showed at next                      #
#########################################################

##### Set variables of the whole project #####
SET(WIT_ROBOT_DIR ${PROJECT_SOURCE_DIR}/../../)
SET(WIT_SOURCE_DIR ${WIT_ROBOT_DIR}/source)
SET(WIT_BINARY_DIR ${WIT_ROBOT_DIR}/bin)

SET(SOURCE_DARWIN_DIR ${WIT_SOURCE_DIR}/darwin)
SET(SOURCE_DATA_DIR ${WIT_SOURCE_DIR}/data)
SET(SOURCE_INCLUDE_DIR ${WIT_SOURCE_DIR}/include)
SET(SOURCE_MODULE_DIR ${WIT_SOURCE_DIR}/module)

#######################################################
#     - Darwin Module 								  #
#######################################################
###########  Framework ################
SET(DARWIN_DATA_DIR ${SOURCE_DARWIN_DIR}/Data)
SET(DARWIN_FRAMEWORK_DIR ${SOURCE_DARWIN_DIR}/Framework)
SET(DARWIN_LINUX_DIR ${SOURCE_DARWIN_DIR}/Linux)

SET(DARWIN_FRAMEWORK_INCLUDE_DIR ${DARWIN_FRAMEWORK_DIR}/include)
SET(DARWIN_FRAMEWORK_SRC_DIR ${DARWIN_FRAMEWORK_DIR}/src)

SET(DARWIN_FRAMEWORK_SRC_MATH_DIR ${DARWIN_FRAMEWORK_SRC_DIR}/math)
SET(DARWIN_FRAMEWORK_SRC_MININI_DIR ${DARWIN_FRAMEWORK_SRC_DIR}/minIni)
SET(DARWIN_FRAMEWORK_SRC_MOTION_DIR ${DARWIN_FRAMEWORK_SRC_DIR}/motion)
SET(DARWIN_FRAMEWORK_SRC_VISION_DIR ${DARWIN_FRAMEWORK_SRC_DIR}/vision)

SET(DARWIN_FRAMEWORK_SRC_MOTION_MODULES_DIR ${DARWIN_FRAMEWORK_SRC_MOTION_DIR}/modules)

########## Linux ####################
SET(DARWIN_LINUX_BUILD_DIR ${DARWIN_LINUX_DIR}/build)
SET(DARWIN_LINUX_INCLUDE_DIR ${DARWIN_LINUX_DIR}/include)

SET(DARWIN_LINUX_BUILD_STREAMER_DIR ${DARWIN_LINUX_BUILD_DIR}/streamer)

#############################################
#     - Wit Modules 					    #
#############################################
SET(WIT_MODULE_COMMUNICATION_DIR ${SOURCE_MODULE_DIR}/communication)
SET(WIT_MODULE_MOTION_DIR ${SOURCE_MODULE_DIR}/motion)
SET(WIT_MODULE_STRATEGY_DIR ${SOURCE_MODULE_DIR}/strategy)
SET(WIT_MODULE_VISION_DIR ${SOURCE_MODULE_DIR}/vision)

SET(WIT_MODULE_VISION_BLOB_DIR ${WIT_MODULE_VISION_DIR}/blob)
SET(WIT_MODULE_VISION_CAM_DIR ${WIT_MODULE_VISION_DIR}/cam)
SET(WIT_MODULE_VISION_IMGPROC_DIR ${WIT_MODULE_VISION_DIR}/imgproc)

SET(WIT_MODULE_STRATEGY_AVOIDANCE_DIR ${WIT_MODULE_STRATEGY_DIR}/avoidance)
SET(WIT_MODULE_STRATEGY_CLIMBLADDER_DIR ${WIT_MODULE_STRATEGY_DIR}/climbladder)
SET(WIT_MODULE_STRATEGY_DUANPANZI_DIR ${WIT_MODULE_STRATEGY_DIR}/duanpanzi)
SET(WIT_MODULE_STRATEGY_LADDERWALKING_DIR ${WIT_MODULE_STRATEGY_DIR}/ladderwalking)
SET(WIT_MODULE_STRATEGY_MARATHON_DIR ${WIT_MODULE_STRATEGY_DIR}/marathon)
SET(WIT_MODULE_STRATEGY_PENALTIES_DIR ${WIT_MODULE_STRATEGY_DIR}/penalties)
SET(WIT_MODULE_STRATEGY_PICKUPLITTER_DIR ${WIT_MODULE_STRATEGY_DIR}/pickuplitter)
SET(WIT_MODULE_STRATEGY_SHOOTBASKET_DIR ${WIT_MODULE_STRATEGY_DIR}/shootbasket)
SET(WIT_MODULE_STRATEGY_SPRINT_DIR ${WIT_MODULE_STRATEGY_DIR}/sprint)

###################################################################
#   - Especially all include directories will be showed at next   #
#   - some variables defined upper will be used                   #
###################################################################

SET(DARWIN_INCLUDE_DIR ${DARWIN_FRAMEWORK_INCLUDE_DIR} ${DARWIN_FRAMEWORK_SRC_MININI_DIR} ${DARWIN_LINUX_BUILD_STREAMER_DIR} ${DARWIN_LINUX_INCLUDE_DIR})

SET(MODULE_INCLUDE_DIR ${WIT_MODULE_COMMUNICATION_DIR} ${WIT_MODULE_MOTION_DIR} ${WIT_MODULE_STRATEGY_DIR} ${WIT_MODULE_VISION_BLOB_DIR} ${WIT_MODULE_VISION_CAM_DIR} ${WIT_MODULE_VISION_IMGPROC_DIR} ${WIT_MODULE_STRATEGY_AVOIDANCE_DIR} ${WIT_MODULE_STRATEGY_CLIMBLADDER_DIR} ${WIT_MODULE_STRATEGY_DUANPANZI_DIR} ${WIT_MODULE_STRATEGY_LADDERWALKING_DIR} ${WIT_MODULE_STRATEGY_MARATHON_DIR} ${WIT_MODULE_STRATEGY_PENALTIES_DIR} ${WIT_MODULE_STRATEGY_PICKUPLITTER_DIR} ${WIT_MODULE_STRATEGY_SHOOTBASKET_DIR} ${WIT_MODULE_STRATEGY_SPRINT_DIR})

#####################################################################
#####   - Prepare for building libraries and runtimes files     #####
#####################################################################

##### Set variables of the input or output directories #####
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${WIT_ROBOT_DIR}/bin)
SET(PROJECT_LIBRARY_PATH ${WIT_ROBOT_DIR}/bin)
SET(LIBRARY_OUTPUT_PATH ${WIT_ROBOT_DIR}/bin)

#############################################################

INCLUDE_DIRECTORIES(BEFORE ${DARWIN_INCLUDE_DIR} ${MODULE_INCLUDE_DIR})

#############################################################
##### - build the darwin framework library              #####
#############################################################

FIND_PACKAGE(OpenCV REQUIRED)
FIND_LIBRARY(WIT_VISION_BLOB wit_vision_blob ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(WIT_VISION_CAMERA wit_vision_camera ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(WIT_VISION_IMGPROC wit_vision_imgproc ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(WIT_MOTION wit_motion ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(WIT_COMMUNICATION wit_communication ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(DARWIN_FRAMEWORK darwin_framework ${PROJECT_LIBRARY_PATH})
FIND_LIBRARY(DARWIN_LINUX darwin_linux ${PROJECT_LIBRARY_PATH})

SET(WIT_STRATEGY_AVOIDANCE_LIB_SRCS ${WIT_MODULE_STRATEGY_AVOIDANCE_DIR}/wit_avoidance.cpp)
SET(WIT_STRATEGY_CLIMBLADDER_LIB_SRCS ${WIT_MODULE_STRATEGY_CLIMBLADDER_DIR}/wit_climbladder.cpp)
SET(WIT_STRATEGY_DUANPANZI_LIB_SRCS ${WIT_MODULE_STRATEGY_DUANPANZI_DIR}/wit_duanpanzi.cpp)
SET(WIT_STRATEGY_LADDERWALKING_LIB_SRCS ${WIT_MODULE_STRATEGY_LADDERWALKING_DIR}/wit_ladderwalking.cpp)
SET(WIT_STRATEGY_MARATHON_LIB_SRCS ${WIT_MODULE_STRATEGY_MARATHON_DIR}/wit_marathon.cpp)
SET(WIT_STRATEGY_PENALTIES_LIB_SRCS ${WIT_MODULE_STRATEGY_PENALTIES_DIR}/wit_penalties.cpp)
SET(WIT_STRATEGY_PICKUPLITTER_LIB_SRCS ${WIT_MODULE_STRATEGY_PICKUPLITTER_DIR}/wit_pickuplitter.cpp)
SET(WIT_STRATEGY_SHOOTBASKET_LIB_SRCS ${WIT_MODULE_STRATEGY_SHOOTBASKET_DIR}/wit_shootbasket.cpp)
SET(WIT_STRATEGY_SPRINT_LIB_SRCS ${WIT_MODULE_STRATEGY_SPRINT_DIR}/wit_sprint.cpp)

ADD_LIBRARY(wit_strategy_avoidance SHARED ${WIT_STRATEGY_AVOIDANCE_LIB_SRCS})
ADD_LIBRARY(wit_strategy_climbladder SHARED ${WIT_STRATEGY_CLIMBLADDER_LIB_SRCS})
ADD_LIBRARY(wit_strategy_duanpanzi SHARED ${WIT_STRATEGY_DUANPANZI_LIB_SRCS})
ADD_LIBRARY(wit_strategy_ladderwalking SHARED ${WIT_STRATEGY_LADDERWALKING_LIB_SRCS})
ADD_LIBRARY(wit_strategy_marathon SHARED ${WIT_STRATEGY_MARATHON_LIB_SRCS})
ADD_LIBRARY(wit_strategy_penalties SHARED ${WIT_STRATEGY_PENALTIES_LIB_SRCS})
ADD_LIBRARY(wit_strategy_pickuplitter SHARED ${WIT_STRATEGY_PICKUPLITTER_LIB_SRCS})
ADD_LIBRARY(wit_strategy_shootbasket SHARED ${WIT_STRATEGY_SHOOTBASKET_LIB_SRCS})
ADD_LIBRARY(wit_strategy_sprint SHARED ${WIT_STRATEGY_SPRINT_LIB_SRCS})

TARGET_LINK_LIBRARIES(wit_strategy_avoidance pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_climbladder pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_duanpanzi pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_ladderwalking pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_marathon pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_penalties pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_pickuplitter pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_shootbasket pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})
TARGET_LINK_LIBRARIES(wit_strategy_sprint pthread rt m zmq ${OpenCV_LIBS} ${WIT_VISION_BLOB} ${WIT_VISION_BLOB} ${WIT_VISION_CAMERA} ${WIT_VISION_IMGPROC} ${WIT_MOTION} ${WIT_COMMUNICATION} ${DARWIN_FRAMEWORK} ${DARWIN_LINUX})






